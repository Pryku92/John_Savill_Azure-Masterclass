############################# IDENTITY #############################


group membership types:

- assigned
- dynamic (Entra ID P1)

group types:

- security
- MS365

Entra ID licenses

- free
- Visual Studio
- premium P1 / P2
- assinged individually or to groups


Entra ID objects

- users
- groups
- enterprise applications /  Azure resources (service principals)
- managed identities
- devices
- "stuff"


Entra ID device types:

- registered / authn MSA (BYOD)
- joined / authn Entra ID
- hybrid (joined to on-prem AD and synced to Entra ID)


Entra connect

- on-prem AD is always the source of truth
- single instance of Entra ID can only sync from one Entra connect (and optional staging)
- an on-prem AD can sync to multiple Entra ID instances
- Entra connect cloud sync - cloud-based sync engine


AuthN methods

- cloud native
- password hash sync (PHS) - cloud
- passthrough authentication (PTA) - to on-prem DCs, hybrid
- federation - against federation service, hybrid


Authorization is always against Entra ID.

Entra ID roles are assinged globally by default but the scope can be lmited by using administrative units.

Entra ID roles can be assigned to users and special type of group (cloud)

Administrative units can't be nested.

mystaff.microsoft.com - scaled down interface for managing objects in an administrative unit

entra.microsoft.com

portal.azure.com



Privileged identity management

- enables elevation of Entra ID (and ARM) roles when needed for limited time
- can be used to elevate to a privileged group membership or ownership for limited time
- roles must be pre-assigned to be available to users
- Entra ID P2


Privileged identitiy management (PIM) is Entra ID's just in time solution.


Entra permissions management

- allows on-demand elevation
- ad-hoc (as opposed to premeditated process with PIM)
- works across clouds (Azure, AWS, GCP)
- can analyze permissions used and right size
- separate license


Access reviews

- allows to act against permissions balooning over time
- enable review on group membership, app assignment, role assignment
- reviews by different people (self-review, administrator, delegated people)
- Entra ID P2


Entra ID MFA

- Entra ID P1 or Security Defaults
- passwordless is considered phising resistant


Temporary access pass allows user to set up when using passwordless authentication.



Conditional access

- triggered for any authorization regardless of authentication method
- Entra ID P1




Continous access evaluation - ongoing communication between athenticator (app to be accessed) and the IdP.


B2B & B2C

Cross-tenant access settings provide control on B2B collaboration and inbound MFA trust.

B2C is aimed at customers as a separate type and tenant instance that is fully customizable with other types of social identity support.



Entitlement management enables access packages to be created of groups, applications, sharepoint sites.

Lifecycle workflows automate tasks associated with on and off boarding.


Entra Domain Services provides a managed AD with objects replicated from Entra ID.






############################# GOVERNANCE #############################

Key organizational components

- Management groups
- Subscriptions
- Resource groups


Governance capabilities

- RBAC
- Policy
- Budget
- locking (subscriptions, resource groups, resources)



Locks are inherited.

Locks work at the control plane (ARM).

Governance is about enforcement of rules and ensuring proper functioning to standards.

compliance.microsoft.com

Root management group is automatically created when first management group is created.

Subscriptions can be moved between different Entra ID tenants.

Every resource exists in a single resource group.

Resource groups cannot be nested.



RBAC

- works at all level (management group -> individual resources)
- inherited
- works at the management plane (some services support data plane actions)
- actions that can be included in an RBAC role are defined in resource providers
- can create custom roles


resources.azure.com - to see resource providers


ABAC - Attribute Based Access Control

ABAC adds conditions to role assignements based on attributes of the resources and potentially the principal acessing.



Policy

- can be used for enforcement and audit
- start with audit!
- a policy is a set of conditions built around resource attribute aliases and an effect
- can impact operations (DenyAction)
- can be grouped into initiatives for assignment and compliance




Cost management and budgets

- cost management provides insight and control of Azure (and AWS) spend
	- cost analysis
	- cost anomaly alerts
	- budgets (alerts & action groups)
- cost allocation (cost spliting of shared resources) with Enterprise Agreement or Customer Agreement
- API available
- pricing calculator



Cost optimization

- right sizing, autoscaling, serverless, shutdown unused resources
- Reserved Instances - discount for a commitment of specific resource / family in specific region for 1 or 3 years
- Azure Savings Plan - discount (lower than RI) for 1 or 3 years commitment, more flexible and broad than RI
- Azure Hybrid Benefit - allows utilization of existing Windows and SQL licenses to Azure resources


On-Demand Capacity Reservation provides SLA backed capacity availability and works with cost optimization tool (i.e. Reserved Instances).



Tagging

Tagging works on subscriptions, resource groups and resources.

Tag values can be JSON documents.

Tags can be enforced through policy.

Tags can be used for search, filter and billing.

Not inherited but can be copied through policy.

Cost management enables inheritance for usage records related to billing (the tag is not applied directly to the resource).



Blueprints & Deployment Stacks

Blueprints gather together different types of artifacts (resource groups, RBAC, ARM templates, policy, etc.) in their own construct for deployment together.

Blueprints have "ability" to deny actions (i.e. write or delete operations).

Deployment Stacs perform similar function - they are deployment of a collection of resources and perform lifecycle operations on that collection of resources.



Azure Resource Graph & Resource Configuration Changes

ARG provides way to query ARM efficiently and across subscriptions using KQL

KQL is also used in Log Analytics.

ARG can be used via portal or command line.

ARG powers Resource Configuration Changes (ResourceChanges)



Azure Advisor provides recommendations around key areas of the Azure environment.










